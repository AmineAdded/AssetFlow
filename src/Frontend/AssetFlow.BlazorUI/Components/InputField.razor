@* ============================================================
   AssetFlow.BlazorUI / Components / InputField.razor
   Composant réutilisable : champ de saisie avec label, erreur...
   Utilisé dans Login, Register et autres formulaires
   ============================================================ *@

<div class="input-group">

    @* Label *@
    @if (!string.IsNullOrEmpty(Label))
    {
        <label class="field-label">@Label</label>
    }

    @* Conteneur input + icône *@
    <div class="input-wrapper @(HasError ? "has-error" : "")">

        @if (InputType == "password")
        {
            @* Champ mot de passe avec toggle visibilité *@
            <input type="@(ShowPassword ? "text" : "password")"
                   placeholder="@Placeholder"
                   value="@Value"
                   @oninput="OnInput"
                   class="form-input" />

            @if (ShowPasswordToggle)
            {
                <button type="button" class="toggle-password" @onclick="TogglePassword" title="@(ShowPassword ? "Masquer" : "Afficher")">
                    @if (ShowPassword)
                    {
                        @* Œil barré — mot de passe visible → cliquer pour masquer *@
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94"/>
                            <path d="M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19"/>
                            <line x1="1" y1="1" x2="23" y2="23"/>
                        </svg>
                    }
                    else
                    {
                        @* Œil ouvert — mot de passe masqué → cliquer pour afficher *@
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                    }
                </button>
            }
        }
        else
        {
            @* Champ texte/email normal *@
            <input type="@InputType"
                   placeholder="@Placeholder"
                   value="@Value"
                   @oninput="OnInput"
                   class="form-input" />

            @if (HasError)
            {
                <span class="error-icon">
                    <svg viewBox="0 0 24 24" style="width:16px;height:16px;stroke:currentColor;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;">
                        <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/>
                    </svg>
                </span>
            }
        }

    </div>

    @* Message d'erreur *@
    @if (HasError && !string.IsNullOrEmpty(ErrorMessage))
    {
        <span class="error-text">@ErrorMessage</span>
    }

    @* Texte d'aide *@
    @if (!HasError && !string.IsNullOrEmpty(HelperText))
    {
        <span class="helper-text">@HelperText</span>
    }

</div>

