/* ============================================================
   FicheMobile.razor.css
   CSS isolé — fiche mobile accessible via QR Code
   Optimisée téléphone : 1 colonne, grandes zones tactiles
   Supporte dark mode via prefers-color-scheme
   ============================================================ */

/* Fond adaptatif (dark mode natif OS, indépendant du bouton appli) */
:root {
    --fm-bg:       #f8fafc;
    --fm-surface:  #ffffff;
    --fm-border:   #e2e8f0;
    --fm-text:     #0f172a;
    --fm-muted:    #64748b;
    --fm-faint:    #94a3b8;
    --fm-primary:  #136dec;
    --fm-brand-bg: #0F1E3C;
}
@media (prefers-color-scheme: dark) {
    :root {
        --fm-bg:      #0d1117;
        --fm-surface: #161b22;
        --fm-border:  rgba(255,255,255,0.08);
        --fm-text:    #f0f6fc;
        --fm-muted:   #8b949e;
        --fm-faint:   #484f58;
    }
}

.fiche-page {
    min-height: 100vh;
    background: var(--fm-bg);
    color: var(--fm-text);
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    display: flex;
    flex-direction: column;
    max-width: 480px;
    margin: 0 auto;
}

/* ── Header ── */
.fiche-header {
    background: var(--fm-brand-bg);
    padding: 1.25rem 1.5rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
    flex-shrink: 0;
}

.fiche-brand { display: flex; align-items: center; gap: 0.875rem; }

.fiche-brand-icon {
    width: 40px; height: 40px;
    background: var(--fm-primary);
    border-radius: 0.625rem;
    display: flex; align-items: center; justify-content: center;
    flex-shrink: 0;
}
.fiche-brand-icon svg {
    width: 22px; height: 22px;
    stroke: white; fill: none;
    stroke-width: 1.75; stroke-linecap: round; stroke-linejoin: round;
}

.fiche-brand-name {
    font-size: 1rem; font-weight: 800; color: white;
    margin: 0; line-height: 1.2;
}
.fiche-brand-sub {
    font-size: 0.7rem; color: rgba(255,255,255,0.5);
    margin: 0;
}

/* Badge statut dans le header */
.fiche-statut {
    display: inline-flex; align-items: center; gap: 0.4rem;
    padding: 0.35rem 0.875rem;
    border-radius: 9999px;
    font-size: 0.72rem; font-weight: 700;
    white-space: nowrap; flex-shrink: 0;
}
.fiche-statut-dot {
    width: 6px; height: 6px;
    border-radius: 50%; background: currentColor;
}
.fiche-statut-encours   { background: rgba(16,185,129,0.2); color: #10b981; }
.fiche-statut-retourne  { background: rgba(148,163,184,0.2); color: #94a3b8; }
.fiche-statut-perdu     { background: rgba(239,68,68,0.2);   color: #ef4444; }
.fiche-statut-endommage { background: rgba(245,158,11,0.2);  color: #f59e0b; }

/* ── Main ── */
.fiche-main {
    flex: 1;
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

/* Photo */
.fiche-photo-wrap {
    width: 100%;
    aspect-ratio: 16/9;
    border-radius: 0.75rem;
    overflow: hidden;
    border: 1px solid var(--fm-border);
    background: var(--fm-surface);
}
.fiche-photo { width: 100%; height: 100%; object-fit: cover; }

/* Identité */
.fiche-identity { text-align: center; }
.fiche-title {
    font-size: 1.6rem; font-weight: 900;
    color: var(--fm-text); margin: 0 0 0.375rem;
    letter-spacing: -0.5px; line-height: 1.2;
}
.fiche-ref {
    font-family: 'Courier New', monospace;
    font-size: 0.875rem; color: var(--fm-muted);
    margin: 0;
}

/* Grille spécifications */
.fiche-specs {
    background: var(--fm-surface);
    border: 1px solid var(--fm-border);
    border-radius: 0.75rem;
    overflow: hidden;
    display: flex; flex-direction: column;
}

.spec-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    border-bottom: 1px solid var(--fm-border);
}
.spec-row:last-child { border-bottom: none; }

.spec-item {
    padding: 1rem 1.25rem;
    display: flex; flex-direction: column; gap: 0.25rem;
    border-right: 1px solid var(--fm-border);
}
.spec-item:last-child { border-right: none; }

.spec-full {
    padding: 1rem 1.25rem;
    display: flex; flex-direction: column; gap: 0.25rem;
}

.spec-item-label {
    font-size: 0.7rem; font-weight: 600; text-transform: uppercase;
    letter-spacing: 0.06em; color: var(--fm-muted);
}
.spec-item-value {
    font-size: 0.9rem; font-weight: 600; color: var(--fm-text);
}
.spec-obs { font-weight: 400; font-style: italic; color: var(--fm-muted); font-size: 0.8rem; }

/* Tags état */
.etat-tag {
    display: inline-flex;
    padding: 0.2rem 0.5rem;
    border-radius: 0.2rem;
    font-size: 0.65rem; font-weight: 700;
    text-transform: uppercase; letter-spacing: 0.06em;
    border: 1px solid;
}
.etat-encours   { background: rgba(16,185,129,0.1);  color: #10b981; border-color: rgba(16,185,129,0.3); }
.etat-retourne  { background: rgba(148,163,184,0.1); color: #94a3b8; border-color: rgba(148,163,184,0.3); }
.etat-perdu     { background: rgba(239,68,68,0.1);   color: #ef4444; border-color: rgba(239,68,68,0.3); }
.etat-endommage { background: rgba(245,158,11,0.1);  color: #f59e0b; border-color: rgba(245,158,11,0.3); }

/* Info scan */
.fiche-scan-info {
    display: flex; align-items: flex-start; gap: 0.625rem;
    padding: 0.875rem 1rem;
    background: rgba(19,109,236,0.06);
    border: 1px solid rgba(19,109,236,0.15);
    border-radius: 0.5rem;
}
.fiche-scan-info svg {
    width: 16px; height: 16px;
    stroke: var(--fm-primary); fill: none;
    stroke-width: 2; stroke-linecap: round; stroke-linejoin: round;
    flex-shrink: 0; margin-top: 1px;
}
.fiche-scan-info p {
    font-size: 0.75rem; color: var(--fm-muted); margin: 0; line-height: 1.5;
}

/* États loading / erreur */
.fiche-loading {
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    min-height: 200px; gap: 1rem;
    color: var(--fm-muted); font-size: 0.875rem;
}
.fiche-spinner {
    width: 36px; height: 36px;
    border: 3px solid var(--fm-border);
    border-top-color: var(--fm-primary);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

.fiche-error {
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    min-height: 200px; gap: 1rem; text-align: center;
}
.fiche-error svg {
    width: 48px; height: 48px; opacity: 0.3;
    stroke: var(--fm-muted); fill: none;
    stroke-width: 1.5; stroke-linecap: round; stroke-linejoin: round;
}
.fiche-error h3 { font-size: 1.1rem; font-weight: 700; color: var(--fm-text); margin: 0; }
.fiche-error p  { font-size: 0.875rem; color: var(--fm-muted); margin: 0; }

/* ── Footer ── */
.fiche-footer {
    background: var(--fm-brand-bg);
    padding: 1rem 1.5rem;
    text-align: center;
}
.fiche-footer p {
    font-size: 0.65rem; color: rgba(255,255,255,0.3);
    margin: 0.1rem 0;
}

/* Écrans larges : centrer la carte */
@media (min-width: 500px) {
    .fiche-page {
        margin: 2rem auto;
        border-radius: 1rem;
        overflow: hidden;
        box-shadow: 0 20px 60px rgba(0,0,0,0.15);
        min-height: unset;
    }
}