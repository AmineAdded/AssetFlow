@* ============================================================
   AssetFlow.BlazorUI / Pages / Auth / Register.razor
   Page d'inscription (Image 2 du wireframe)
   Layout : Panneau bleu gauche + Formulaire droite
   ============================================================ *@

@page "/register"
@using AssetFlow.BlazorUI.Components

<div class="login-page"> @* M√™me layout que login *@

    @* === PANNEAU GAUCHE BLEU === *@
    <div class="left-panel">
        <img src="images/logo.png" alt="AssetFlow" class="panel-logo" />
        <h2>Rejoignez AssetFlow</h2>
        <p class="panel-subtitle">Syst√®me intelligent de gestion de stock</p>

        <ul class="features-list">
            <li>ü§ñ Gestion automatis√©e</li>
            <li>üß† Intelligence artificielle</li>
            <li>üîî Alertes temps r√©el</li>
        </ul>
    </div>

    @* === PANNEAU DROIT : FORMULAIRE D'INSCRIPTION === *@
    <div class="right-panel">

        <h1 class="form-title">Cr√©er un compte</h1>
        <p class="form-subtitle">Remplissez le formulaire pour demander l'acc√®s au syst√®me</p>

        @* Messages de feedback *@
        @if (!string.IsNullOrEmpty(SuccessMessage))
        {
            <div class="alert alert-success">@SuccessMessage</div>
        }
        @if (!string.IsNullOrEmpty(ErrorMessage))
        {
            <div class="alert alert-error">@ErrorMessage</div>
        }

        @* Pr√©nom + Nom sur la m√™me ligne *@
        <div class="form-row">
            <InputField Label="Pr√©nom" Placeholder="Mohamed" @bind-Value="FirstName" />
            <InputField Label="Nom" Placeholder="Maddeh" @bind-Value="LastName" />
        </div>

        @* Email *@
        <InputField
            Label="Adresse email professionnelle"
            Placeholder="nom@example.com"
            @bind-Value="Email"
            InputType="email"
            HelperText="Vous recevrez un email de confirmation" />

        @* Mot de passe + Confirmation *@
        <div class="form-row">
            <InputField
                Label="Mot de passe"
                Placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                @bind-Value="Password"
                InputType="password"
                ShowPasswordToggle="true" />

            <InputField
                Label="Confirmer mot de passe"
                Placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                @bind-Value="ConfirmPassword"
                InputType="password"
                ShowPasswordToggle="true" />
        </div>

        @* Barre de force du mot de passe *@
        <div class="password-strength">
            <div class="strength-bar">
                <div class="strength-segment @(PasswordStrength >= 1 ? "active weak" : "")"></div>
                <div class="strength-segment @(PasswordStrength >= 2 ? "active medium" : "")"></div>
                <div class="strength-segment @(PasswordStrength >= 3 ? "active strong" : "")"></div>
            </div>
            <small>Min. 8 caract√®res, 1 majuscule, 1 chiffre</small>
        </div>

        @* D√©partement *@
        <InputField
            Label="D√©partement"
            Placeholder="Ex: IT, Production, Logistique"
            @bind-Value="Department" />

        @* S√©lection du r√¥le via cartes *@
        <div class="role-selection">
            <label class="field-label">R√¥le demand√©</label>
            <div class="role-cards-row">

                <div class="role-card-small @(SelectedRole == "IT" ? "selected" : "")"
                     @onclick='() => SelectedRole = "IT"'>
                    <input type="radio" name="role" checked="@(SelectedRole == "IT")" />
                    <span class="role-icon">üñ•Ô∏è</span>
                    <div>
                        <strong>IT</strong>
                        <small>Gestion mat√©riel & demandes</small>
                    </div>
                </div>

                <div class="role-card-small @(SelectedRole == "EquipeAchat" ? "selected" : "")"
                     @onclick='() => SelectedRole = "EquipeAchat"'>
                    <input type="radio" name="role" checked="@(SelectedRole == "EquipeAchat")" />
                    <span class="role-icon">üõí</span>
                    <div>
                        <strong>√âquipe Achat</strong>
                        <small>Gestion offres & stock</small>
                    </div>
                </div>

                <div class="role-card-small @(SelectedRole == "Employe" ? "selected" : "")"
                     @onclick='() => SelectedRole = "Employe"'>
                    <input type="radio" name="role" checked="@(SelectedRole == "Employe")" />
                    <span class="role-icon">üë§</span>
                    <div>
                        <strong>Employ√©</strong>
                        <small>Consultation √©quipements</small>
                    </div>
                </div>

            </div>
        </div>

        @* Info : approbation admin *@
        <div class="info-box">
            <span>‚ÑπÔ∏è</span>
            <span>Votre demande sera examin√©e par un administrateur avant activation</span>
        </div>

        @* Case √† cocher conditions *@
        <label class="checkbox-label">
            <input type="checkbox" @bind="AcceptTerms" />
            J'accepte les conditions d'utilisation et la politique de confidentialit√©
        </label>

        @* Bouton de soumission *@
        <button class="btn-primary"
                @onclick="HandleRegister"
                disabled="@(IsLoading || !AcceptTerms)">
            @(IsLoading ? "Cr√©ation en cours..." : "Cr√©er mon compte")
        </button>

        @* S√©parateur *@
        <div class="divider"><span>OU</span></div>

        @* Lien vers login *@
        <p class="text-center">
            Vous avez d√©j√† un compte ? <a href="/role-select" class="link">Se connecter</a>
        </p>

    </div>
</div>
